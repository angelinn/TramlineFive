<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="TramlineFive.Pages.MapPage"
             xmlns:v="clr-namespace:TramlineFive.Views"
             xmlns:cv="clr-namespace:TramlineFive.Converters"
             Title="Карта"
             BindingContext="{Binding MapViewModel, Source={StaticResource Locator}}">

    <ContentPage.Resources>
        <ResourceDictionary>
            <cv:ColorConverter x:Key="ColorConverter" />
        </ResourceDictionary>
    </ContentPage.Resources>
    
    <Grid x:Name="grid">
        <ActivityIndicator HorizontalOptions="Center" VerticalOptions="Center" HeightRequest="64" WidthRequest="64" IsEnabled="True" IsRunning="True" IsVisible="True" />
        <v:MapsUIView IsVisible="{Binding IsMapVisible}" />
        <StackLayout IsVisible="{Binding IsMyLocationVisible}" BackgroundColor="{Binding MyLocationBackground, Converter={StaticResource ColorConverter}}" HeightRequest="32" Padding="5" Margin="5" WidthRequest="32" Opacity="0.8" HorizontalOptions="End" VerticalOptions="Start">
            <StackLayout.GestureRecognizers>
                <TapGestureRecognizer Command="{Binding MyLocationCommand}" />
            </StackLayout.GestureRecognizers>

            <Image Source="Resources/drawable/mylocation.png">
                <Image.Source>
                    <OnPlatform x:TypeArguments="ImageSource">
                        <OnPlatform.Android>
                            <FileImageSource File="Resources/drawable/mylocation.png" />
                        </OnPlatform.Android>
                        <OnPlatform.WinPhone>
                            <FileImageSource File="assets/mylocation.png" />
                        </OnPlatform.WinPhone>
                    </OnPlatform>
                </Image.Source>
            </Image>
        </StackLayout>
    </Grid>
</ContentPage>
    